# 缓存穿透 缓存雪崩 缓存击穿
## 缓存穿透
 访问通过redis直接经过mysql，通常是一个不存在的key，在数据库查询为null。每次请求落在数据库、并且高并发。

 ![alt](https://gitee.com/afeiei/img-hosting/raw/master/Redis/008.png)

  解决方案 
  1. 将查到的null设置为key的缓存对象。
  2. 根据明显错误的key在逻辑层进行验证。
  3. 使用布隆过滤器。布隆过滤器的作用是某个 key 不存在，那么就一定不存在，它说某个 key 存在，那么很大可能是存在(存在一定的误判率)。于是我们可以在缓存之前再加一层布隆过滤器，在查询的时候先去布隆过滤器查询 key 是否存在，如果不存在就直接返回。

## 缓存雪崩
 雪崩指的是redis缓存集体大规模实效，在高并发情况下突然大规模访问mysql，使得数据库崩掉。
 ![alt](https://gitee.com/afeiei/img-hosting/raw/master/Redis/009.png)

  解决方案
  1. 将key的过期时间后面随机加上一个随机数，让key均匀失效。
  2. 为了防止Redis宕机导致缓存雪崩的问题，可以搭建Redis集群，提高Redis的容灾性。
  3. 使用熔断机制。当流量到达一定的阈值时，就直接返回“系统拥挤”之类的提示。

## 缓存击穿
 指一个热点key，在不停的扛着高并发，当这个key失效的瞬间，持续的高并发就穿破缓存，直接请求数据库。

![alt](https://gitee.com/afeiei/img-hosting/raw/master/Redis/010.png)

解决方案
1. 使用互斥锁避免大量请求同时落到db。
2. 做好熔断、降级，防止系统崩溃。
3. 设置热点数据不过期。（视情况而定）